<!DOCTYPE html>

<html lang="en">

<head>

<!-- Metadata -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="Seungmoon Rieh">
<meta name="keywords" content="">

<!-- Title and image -->
<title>Seungmoon Rieh</title>
<link href="/img/seungmoonrieh.jpg" rel="icon">

<!-- CSS -->
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/monokai-sublime.css" rel="stylesheet">
<link href="/css/site.css" rel="stylesheet">

<!-- JavaScript -->
<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/bootstrap.bundle.min.js" type="text/javascript"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script src="/js/include_html.js" type="text/javascript"></script>
<script src="/js/mathjax/tex-chtml.js" type="text/javascript"></script>
<script src="/js/site.js" type="text/javascript"></script>

</head>

<body>

<include src="/header.html"></include>

<div class="container">
<div class="row">
<div class="col-md-12">
<h1 class="my-4">Platform Engineering</h1>

<!-- Git BEGIN -->
<div class="card mb-4" id="git">
  <div class="card-body">
    <h2 class="card-title">GIT</h2>
    <ul class="list-unstyled mb-0">
      <li><a href="#git-">Branching strategy</a></li>
      <li><a href="#git-">Git concepts</a></li>
      <li><a href="#git-">Git commands</a></li>
      <ul>
        <li><a href="#git-">Setup</a></li>
        <li><a href="#git-">Manage project</a></li>
        <li><a href="#git-">Snapshotting</a></li>
        <li><a href="#git-">Branching</a></li>
        <li><a href="#git-">Update</a></li>
        <li><a href="#git-">Inspect</a></li>
        <li><a href="#git-">Debug</a></li>
        <li><a href="#git-">Patch</a></li>
        <li><a href="#git-">Admin</a></li>
      </ul>
      <li><a href="#git-">Questions</a></li>
    </ul>
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Branching strategy</h2>

    <h3 class="card-title">Git flow</h3>
    <p class="card-text">Useful when keep many versions of production code from the release branches</p>
    <ul>
      <li><code>master</code> - represent the production</li>
      <li><code>release</code> - branch to perform release. Must be merged into both develop and master branches</li>
      <li><code>develop</code> - branch for active development. All features branches must be cut from and merged to this branch</li>
      <li><code>feature</code> - branch for each developer working on a feature. Developers should regularly pull from develop branch to keep feature branches up to date</li>
      <li><code>hotfix</code> - branch to quickly apply changes to master branch without going through the full flow. Must be merged into both master and develop branch</li>
    </ul>
    <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git1.png" alt="Card image cap">

    <h3 class="card-title">Github flow</h3>
    <p class="card-text">Simpler but aimed at maintaining a single version of production code</p>
    <ul class="list-unstyled mb-0">
      <li>There are only <code>master</code> and <code>feature</code> branch</li>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: <a href="https://www.bmc.com/blogs/devops-branching-strategies">DevOps Branching Strategies Explained</a>
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Git concepts</h2>

    <ul>
      <li><code>master</code> - default name of starting branch</li>
      <li><code>origin</code> - default name of remote</li>
    </ul>

    <ul>
      <li><code>git add</code> - move files from <strong>untracked/modified</strong> state to <strong>staged</strong> state</li>
      <li><code>git commit</code> - move files from <strong>staged</strong> state to <strong>committed</strong> state</li>
    </ul>

    <ul>
      <li><code>git fetch</code> - gather commits from remote that don't exist in local</li>
      <li><code>git merge</code> - integrate commits to your branch</li>
      <li><code>git pull</code> - git fetch + git merge</li>
    </ul>

    <ul>
      <li><code>branch</code> - a version of code</li>
      <li><code>git cherry-pick</code> - get a commit from one branch and integrate to another branch</li>
      <li><code>HEAD</code> - last commit of current branch</li>
    </ul>

    <ul>
      <li><code>Fork</code> - creates server side copy of repository</li>
      <li><code>Clone</code> - gets local copy of repository of a server including history and branches</li>
    </ul>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Git commands</h2>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Setup</h2>

    <h3 class="card-title">git config</h3>
    <ul>
      <li>System level config - <code>/etc/gitconfig</code></li>
      <li>User level config - <code>~/.gitconfig</code> or <code>~/.config/git/config</code></li>
      <li>Repo level config - <code>.git/config</code></li>
    </ul>

<pre><code class="bash"># Show the current git config
git config --list

# Add name and email
git config --global user.name &lt;name&gt;
git config --global user.email &lt;email&gt;

# Set default text editor
git config --global core.editor vim</code></pre>

    <h3 class="card-title">git help</h3>

    <h3 class="card-title">git alias</h3>

<pre><code class="bash">git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.unstage 'reset HEAD --'
git config --global alias.last 'log -1 HEAD'</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Manage project</h2>

    <h3 class="card-title">git init</h3>

    <h4 class="card-title">Fix a corrupt git repository</h4>

<pre><code class="bash">rm -rf .git
git init
git remote add origin &lt;clone_url&gt;
git fetch
git reset origin/master</code></pre>

    <h3 class="card-title">git clone</h3>

    <h4 class="card-title">Copy a repo to another repo</h4>

<pre><code class="bash">git clone --bare --quiet &lt;git_clone_url_to_copy_from&gt;
git push --mirror --quiet &lt;git_clone_url_to_copy_into&gt;</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Snapshotting</h2>

    <h3 class="card-title">git add</h3>

    <h3 class="card-title">git status</h3>

<pre><code class="bash">git status -s</code></pre>

    <h3 class="card-title">git diff</h3>

<pre><code class="bash"># Compare two branches
git diff &lt;branch_1&gt; &lt;branch_2&gt;

# Compare a specific file between two branches
git diff &lt;branch_1&gt; &lt;branch_2&gt; -- &lt;file&gt;

git diff --staged</code></pre>

    <h3 class="card-title">git difftool</h3>

    <h3 class="card-title">git commit</h3>

    <h3 class="card-title">git reset</h3>
    <ul>
      <li>Create a file</li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git2.png" alt="Card image cap">
      <li>Run <code>git add</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git3.png" alt="Card image cap">
      <li>Run <code>git commit</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git4.png" alt="Card image cap">
      <li>Edit the file</li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git5.png" alt="Card image cap">
      <li>Run <code>git add</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git6.png" alt="Card image cap">
      <li>Run <code>git commit</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git7.png" alt="Card image cap">
      <li>Edit the file once more</li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git8.png" alt="Card image cap">
      <li><code>git reset --soft HEAD~</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git9.png" alt="Card image cap">
      <li><code>git reset --mixed HEAD~</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git10.png" alt="Card image cap">
      <li><code>git reset --hard HEAD~</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git11.png" alt="Card image cap">
      <li><code>git reset file.txt</code> (<code>git reset --mixed HEAD file.txt</code>)</li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git12.png" alt="Card image cap">
      <li><code>git add file.txt</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git13.png" alt="Card image cap">
      <li><code>git reset eb43 -- file.txt</code></li>
      <img class="img-fluid" class="card-img-top" src="/platform-engineering/platform-engineering/git14.png" alt="Card image cap">
    </ul>

    <h3 class="card-title">git rm</h3>
    <ul>
      <li>git rm --cached &lt;file&gt;</li>
    </ul>

    <h3 class="card-title">git mv</h3>

    <h3 class="card-title">git clean</h3>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Branching</h2>
    <ul>
      <li><code>HEAD</code> pointer points to the local branch</li>
      <!-- <li><code>HEAD</code> (and branch) moves forward in each commit</li> -->
      <li><code>detached HEAD</code> means that <code>HEAD</code> pointer is not pointing to a branch, but rather a commit id</li>
    </ul>

    <h3 class="card-title">git branch</h3>

    <pre><code class="bash"># Create a branch
git branch &lt;branch&gt;

# Delete a branch
git branch -D &lt;branch&gt;

# Display branches with the last commit
git branch -v</code></pre>

    <h3 class="card-title">git checkout</h3>

    <pre><code class="bash"># Move HEAD pointer to a branch
git checkout &lt;branch&gt;

# git branch + git checkout
git checkout -b &lt;branch&gt;</code></pre>

    <h3 class="card-title">git merge</h3>

    <h3 class="card-title">git mergetool</h3>

    <h3 class="card-title">git log</h3>

    <h3 class="card-title">git stash</h3>

<pre><code class="bash"># Moving uncommited changes to a new branch
git stash
git checkout -b &lt;branch_name&gt;
git stash apply</code></pre>

    <h3 class="card-title">git tag</h3>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Update</h2>

    <h3 class="card-title">git fetch</h3>

<pre><code class="bash"># Update tracking of remote branches
git fetch

# Remove local branches that do not exist in remote
git fetch --prune

# Display local and remote branches
git branch -a

# Remove all untracked files
git clean -f</code></pre>

    <h3 class="card-title">git pull</h3>

    <h3 class="card-title">git push</h3>

    <h3 class="card-title">git remote</h3>

    <h4 class="card-title">Sync two repos</h4>

<pre><code class="bash"># First clone the original repo and cd into its root
git remote add upstream &lt;clone_url&gt;  # "clone_url" should be url of sync repo
git push upstream &lt;branch_name&gt;  # "branch_name" should a branch in sync repo</code></pre>

    <h3 class="card-title">git archive</h3>

    <h3 class="card-title">git submodule</h3>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Inspect</h2>

    <h3 class="card-title">git show</h3>

    <h3 class="card-title">git shortlog</h3>

    <h3 class="card-title">git describe</h3>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Debug</h2>

    <h3 class="card-title">git bisect</h3>

    <h3 class="card-title">git blame</h3>

    <h3 class="card-title">git grep</h3>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Patch</h2>

    <h3 class="card-title">git cherry-pick</h3>

    <h3 class="card-title">git rebase</h3>

    <h4 class="card-title">Squashing commits</h4>
    <ul>
      <li>When there are too many commits, it may be hard for other people to review your pull requests</li>
    </ul>

<pre><code class="bash"># Search your commit history and pick the one you want to squash commits from
git log --oneline  # Or, git log --pretty=format:"%h%x09%an%x09%ad%x09%s"

# This opens nano editor
# Use reword/pick/squash to specify what you want to do for each commit
# Usually, "r" the first commit at the top and "s" the rest of commits (For example, to avoid "Cannot 'squash' without a previous commit" error)
# Ctrl-O &amp; Ctrl-T will write your changes.
git rebase -p -i &lt;commit_hash&gt;

# Observe that commits have been squashed
git log --oneline   # Or, git log --pretty=format:"%h%x09%an%x09%ad%x09%s"

# This opens nano editor. Enter new commit message. Ctrl-O &amp; Ctrl-T will write your changes
git commit --amend

# Finally push the changes to your branch
git push -f origin &lt;branch&gt;</code></pre>

    <h3 class="card-title">git revert</h3>

    <h4 class="card-title">Revert changes in local branch</h4>

<pre><code class="bash"># Show lost commits
git reflog

# Revert to a deleted commit (Assuming &lt;commit_hash&gt; was retrieved from the output of "git reflog")
git reset --hard &lt;commit_hash&gt;

# Revert to previous commit in the remote
git reset --hard &lt;commit_hash&gt;
git push -f origin &lt;branch&gt;

# Discard changes in a particualr file / Restore a deleted file
git checkout HEAD &lt;file&gt;

# Force overwrite local with remote
git fetch --all
git reset --hard origin/&lt;branch_name&gt;

# &lt;commit_hash&gt; should come from &lt;source_branch&gt; Last two steps are to clean up the &lt;source_branch&gt;
git checkout &lt;target_branch&gt;
git cherry-pick &lt;commit_hash&gt;
git checkout &lt;source_branch&gt;
git reset --hard HEAD~1 </code></pre>
<!-- probably should use "git branch | grep -v "master" | xargs git branch -D "-->

    <h4 class="card-title">Revert a merged PR</h4>

<pre><code class="bash"># Checkout a branch from master (Ex. git checkout -b revert)

# This reverts a particular commit
git revert -m 1 &lt;commit_hash_of_PR_to_revert&gt;

# This reverts everything up to but not including commit_hash
git revert -m 1 &lt;commit_hash&gt;..HEAD

# Then push the reverted changes to the branch
git push origin revert

# Finally, raise a PR from revert to master</code></pre>

    <h4 class="card-title">Revert a single file</h4>

<pre><code class="bash">git checkout &lt;commit_hash_of_file_to_revert_to&gt; -- &lt;file_including_path&gt;
git commit -am &lt;commit_message&gt;
git push origin &lt;branch_name&gt;</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Admin</h2>

    <h3 class="card-title">git reflog</h3>

    <h3 class="card-title">git filter-branch</h3>
  </div>
  <div class="card-footer text-muted">
    Reference: Pro Git, Scott Chacon & Ben Straub
  </div>
</div>

<!-- <div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Others</h2>

<pre><code class="bash"># Show files that have added, modified, and deleted
git status

# Move files to "staged"
git add -A

# Move files to "commited"
git commit -am &lt;message&gt;

# Apply your changes to a particular branch on remote repository
git push origin &lt;branch&gt;</code></pre>

    <h3 class="card-title">Delete</h3>

<pre><code class="bash"># Delete a particular branch from your local
git branch -d &lt;branch&gt;

# Delete a particular branch from remote repository
git push origin -d &lt;branch&gt;

# Delete a tag from your local
git tag -d &lt;tag&gt;

# Delete a tag from remote repository
git push origin -d &lt;tag&gt;</code></pre>

    <h3 class="card-title">.gitignore</h3>
    <ul>
      <li>https://github.com/github/gitignore</li>
    </ul>
  </div>
  <div class="card-footer text-muted">

  </div>
</div> -->

<div class="card mb-4" id="git-">
  <div class="card-body">
    <h2 class="card-title">Questions</h2>

    <h3 class="card-title">Branching strategy</h3>
    <ul>
      <li>Explain git flow</li>
      <li>Explain github flow</li>
    </ul>

    <h3 class="card-title">Git concepts</h3>
    <ul>
      <li>Explain difference between HEAD and index</li>
      <li>Explain difference between fork, branch, and clone</li>
      <li>Explain difference between git fetch and git pull</li>
    </ul>

    <h3 class="card-title">Snapshotting</h3>
    <ul>
      <li>Explain git reset</li>
      <li>Explain how to remove a file from git without removing it from file system</li>
    </ul>

    <h3 class="card-title">Patch</h3>
    <ul>
      <li>Explain git cherry-pick</li>
      <li>Explain squashing commits</li>
      <li>Explain how to revert previous commit</li>
      <li>Explain how to revert merged pull request</li>
      <li>Explain how to revert a single file</li>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: <a href="https://www.bmc.com/blogs/devops-branching-strategies">DevOps Branching Strategies Explained</a>
  </div>
</div>
<!-- Git END -->

</div> <!-- /.col-md-12 -->
</div> <!-- /.row -->
</div> <!-- /.container -->

<include src="/footer.html"></include>

</body>

</html>