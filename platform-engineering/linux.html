<!DOCTYPE html>

<html lang="en">

<head>

<!-- Metadata -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="Seungmoon Rieh">
<meta name="keywords" content="">

<!-- Title and image -->
<title>Seungmoon Rieh</title>
<link href="/img/seungmoonrieh.jpg" rel="icon">

<!-- CSS -->
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/monokai-sublime.css" rel="stylesheet">
<link href="/css/site.css" rel="stylesheet">

<!-- JavaScript -->
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script type="text/javascript" src="/js/include_html.js"></script>
<script type="text/javascript" src="/js/site.js"></script>

</head>

<body>

<include src="/header.html"></include>

<div class="container">
<div class="row">
<div class="col-md-12">
<h1 class="my-4">Platform Engineering</h1>

<!-- Linux BEGIN -->
<div class="card mb-4" id="linux">
  <div class="card-body">
    <h2 class="card-title">Linux (Bash)</h2>
    <p class="card-text"></p>
    <ul class="list-unstyled mb-0">
      <li><a href="#linux-1">Shell Scripting</a></li>
      <li><a href="#linux-2">CD Command</a></li>
      <li><a href="#linux-3">Date</a></li>
      <li><a href="#linux-4">SSH and SCP</a></li>
      <li><a href="#linux-5">PS</a></li>
      <li><a href="#linux-6">Archive</a></li>
      <li><a href="#linux-7">Administration</a></li>
      <li><a href="#linux-8">System</a></li>
      <li><a href="#linux-10">Color</a></li>
      <li><a href="#linux-11">Python Integration</a></li>
      <li><a href="#linux-12">Cron</a></li>
      <li><a href="#linux-13">File</a></li>
      <li><a href="#linux-14">Process and Thread</a></li>
    </ul>
  </div>
</div>

<div class="card mb-4" id="linux-1">
  <div class="card-body">
    <h2 class="card-title">Shell Scripting</h2>

    <h3 class="card-title">When to use</h3>
    <ul>
      <li>Little data manipulation.</li>
      <li>Performance doesn't matter much.</li>
      <li>Roughly less than 100 lines of codes.</li>
    </ul>

    <h3 class="card-title">Script header</h3>

<pre><code class="bash">#!/bin/bash

# ------------------------------ #
# The script does blah blah blah #
# ------------------------------ #</code></pre>

    <h3 class="card-title">Formatting</h3>
    <ul>
      <li>Indent 2 spaces.</li>
      <li>Maximum line length is 80 characters.</li>
    </ul>

    <h3 class="card-title">Function</h3>

<pre><code class="bash">########################
# Function description
# Arguments:
#   ...
# Returns
#   ...
########################
function &lt;function_name&gt;() {
  # ${1}, ${2}, ${3}, so on are used to read in arguments passed to shell script and
  # functions.
  local &lt;first_argument&gt;=${1}
  local &lt;second_argument&gt;=${2}
  local &lt;third_argument&gt;=${3}
  ...

  # This is the return statement.
  echo &lt;ret_val&gt;

  # This exits the script execution.
  exit 1
}

# When calling a function, wrapping a variable inside quotes will make sure that
# the entire content is passed. For example,
my_function ${arg1} ${arg2} "${arg_large_string_with_spaces}"</code></pre>

    <h3 class="card-title">Variable</h3>
    <ul>
      <li>Bash variables are case-sensitive, just like Unix.</li>
    </ul>

    <h3 class="card-title">Read user inputs</h3>

<pre><code class="bash">read USER_INPUT1 ; export USER_INPUT1
# Makes echoing user input unavailable.
read -s USER_INPUT1 ; export USER_INPUT1

read input
if [[ "${input}" == "y" ]]; then
  echo "${input}"
fi

# Provide user guide on how to run the script.
if [ -z "${ENV_VAR_SET_BY_USER_ACTION}" ]; then
  echo "Usage: ${0} keyword1"
  echo "Usage: ${0} keyword2"
  echo "Usage: ${0} keyword3"
  exit 1
fi</code></pre>

    <h3 class="card-title">Suppress outputs</h3>

<pre><code class="bash"># Supress outputs of pushd and popd commands.
pushd () {
  command pushd "$@" > /dev/null
}

popd () {
  command popd "$@" > /dev/null
}

# Suppress output of bash command.
cat file.txt > /dev/null # suppress output

# Suppress error.
err() {
  echo "[$(date +'%Y-%m-%dT%H:%M:%S%z')]: $*" >&2
}</code></pre>

    <h3 class="card-title">curl</h3>

<pre><code class="bash"># Options
# v – verbose output
# s – suppress output
# u - to pass in credentials
# o – to write output to a destination
# w '%{http_code}' – to get the http status code
curl &lt;options&gt; &lt;url&gt; \
    -X &lt;GET/POST/PUT/DELETE&gt; \
    -H &lt;headers&gt; \
    -d &lt;data&gt;

# Posting a JSON data.
echo ${JSON_DATA} | curl &lt;options&gt; &lt;URL&gt; \
                        -X &lt;GET/POST/PUT/DELETE&gt; \
                        -H &lt;Headers&gt; \
                        -d @-

curl &lt;options&gt; &lt;URL&gt; \
    -X &lt;GET/POST/PUT/DELETE&gt; \
    -H &lt;Headers&gt; \
    -d'{ "field": "value" }'

# Constructing JSON payload.
curl -u "${username}":"${password}" -X POST "${url}/${path}" \
--data-urlencode 'json={
"": "0",
"field": {
  "field1": "'${value1}'",
  "field2": "'${value2}'",
  "field3": "'${value3}'"
}
}' -H "field: ${value}"

# Constructing XML payload.
cat &gt; data.xml &lt;&lt;EOF
&lt;element&gt;
  &lt;subelement1&gt;${value1}&lt;/subelement1&gt;
  &lt;subelement2&gt;${value2}&lt;/subelement2&gt;
  &lt;subelement3&gt;${value3}&lt;/subelement3&gt;
&lt;/element&gt;
EOF

curl -u "${username}":"${password}" \
   -X POST \
   -H 'content-type:application.xml' \
   -d @data.xml \
   "${url}/${path}"
rm -f data.xml

# Example
http_status_code=$(curl -u "${username}":"${password}" \
                        -w "%{http_code}" \
                        -o "${log_output_location}" \
                        -s -H "Content-Type:application/json" \
                        -d '{"field": "'${variable}'"}' \
                        "${url}/${path}")</code></pre>

    <h3 class="card-title">wget</h3>

<pre><code class="bash">wget --user &lt;username&gt; --password &lt;password&gt; &lt;url&gt;
wget -O &lt;file_name&gt; &lt;url&gt;</code></pre>

    <h3 class="card-title">Brackets</h3>
    <ul>
      <li>Double brackets are enhanced version of single brackets.</li>
    </ul>

<pre><code class="bash"># With single brackets.
[ "$ASD" == Value ]

# With double brackets.
[[ $ASD == Value ]]</code></pre>

    <h3 class="card-title">Conditional</h3>

<pre><code class="bash"># Variable equals to an integer 200.
if [[ "${variable}" -eq 200 ]]; then

fi

# Variable is null.
if [[ -z "${variable}" ]]; then

fi

# Variable is not null.
if [[ -n "${variable}" ]]; then

fi

# One of two variables is null.
if [[ -z "${var1}" -o -z "${var1}" ]]; then

fi

# Variable equals to a string.
if [ "${variable}" == "{string}" ]; then

fi

# Complex conditions.
if [[ -z "${variable1}" && "{variable2}" != "something" ]] \
    && [[ "${variable3}" == "value1" || "${variable4}" == "value2" ]]; then

fi</code></pre>

    <h3 class="card-title">Current and parent directory</h3>
    <ul>
      <li>Scripts can execute from different path, so absolute path is needed.</li>
    </ul>

<pre><code class="bash">CURRENT_DIR=$( cd "$(dirname "${BASH_SOURCE[0]}")" ; pwd -P )
PARENT_DIR="$(dirname "${CURRENT_DIR}")"</code></pre>

    <h3 class="card-title">Loop</h3>

<pre><code class="bash"># Loop through array.
for i in "${array[@]}"; do
  echo "${i}"
done

# Loop through number.
for i in $(seq 1 "${END}"); do
  echo "${i}"
done

# Loop through a string separated by space.
string="a b c d e"
for i in $(echo "${string}"); do
  echo "${i}"
done

# Loop through directory.
for filename in path/*.txt; do
  [ -e "${filename}" ] || continue
done

# Loop through only directory.
for file in * ; do
  if [[ -d ${file} ]]; then
    for subfile in ${file}/*; do
      # Do something with ${subfile}
    done
  fi
done</code></pre>

    <h3 class="card-title">Array</h3>

<pre><code class="bash"># Declare an array.
array=("item1" "item2" "item3")

# Add to an array.
array+=("item4")

# Assessing array element.
element=${array[0]}</code></pre>

    <h3 class="card-title">File</h3>

<pre><code class="bash"># Check if file exists.
if [ ! -f /path/file ]; then
  echo "File does not exist"
fi

# Check if a string exists in a file.
if grep -Fxq "${string}" "${file}"; then
  # String found
else
  # String not found
fi

# Read file line by line.
while IFS= read -r line; do
  echo "${line}"
done < "${file}"

# Write a block of texts to a file
cat &lt;&lt;EOF&gt;&gt; "${file}"
{
  "key": "value"
}
EOF</code></pre>

    <h3 class="card-title">sed</h3>

<pre><code class="bash"># Match pattern and update in place.
sed -i "s/string_to_match/string_to_replace_with/" ${file}

# If using variable.
sed -i "s/string_to_match/${string_to_replace_with}/" ${file}

# Add a line after a match.
sed -i "/string_to_match.*/a ${string_to_insert}/" ${file}

# If adding 5 leading spaces to "string_to_insert".
sed -i "/string_to_match.*/a /    / ${string_to_insert}/" ${file}

# Remove a block of texts from a file.
sed -i "/begin/./end/d "${file}"</code></pre>

    <h3 class="card-title">awk</h3>

<pre><code class="bash"># Assume the file content below and get the number of unique IPs.
# User1,ip1
# User2,ip2
# User3,ip1
# User3,ip1
# User5,ip3
cat $file | awk -F”,” ‘{print $2}’ | sort | uniq | wc -l</code></pre>

    <h3 class="card-title">Sting</h3>

<pre><code class="bash"># Remove two characters from the beginning for the string.
string=${string:2}

# Remove prefix from a string.
string=${string#"prefix_to_remove"}

# Remove path from a file.
string=${string##*/}

# Remove file from path.
path="/path/to/file.txt"
echo "${path%/*}/"
mkdir -p "${path%/*}/"

# Find and replace.
${string/$match/$replace}

# Find and replace for all occurance.
${string//$match/$replace}

# Split string by a delimiter "/".
array_of_split_string=(${string//\//})
first_element_after_split=${array_of_split_string[0]}
second_element_after_split=${array_of_split_string[1]}</code></pre>

    <h3 class="card-title">jq</h3>

<pre><code class="bash"># Make JSON output pretty
echo ${json} | jq -r '.'

# Sort the JSON fields by key
echo ${json} | jq --sort-keys

# Replace values of multiple fields
echo ${json} | jq .field1.field2.field3 = value1 | field4.field5.field6 = value2</code></pre>

    <h3 class="card-title">yq</h3>

<pre><code class="yaml"># Example
a:
b:
  - c:
    d:
      e:
      f:
      g:
  - c:
    d:
      e:
      f:
      g:
  - c:
    d:
      e:
      f:
      g:
  - c:
    d:
      e:
      f:
      g:</code></pre>

<pre><code class="bash"># Assuming yq version greater or equal to 3.

# Get all values of 'e'.
yq r ${yaml_file_name} "a.b.*.d.e"

# Get 'f' that where 'e' equals to a particular value.
yq r ${yaml_file_name} "a.b.(d.e==${some_value}).d.f"

# Add an elemnet under 'b'.
yq w -i ${yaml_file_name} a.b[+] ${something_to_add}

# Add under second element of 'b'.
yq w -i ${yaml_file_name} a.b[1].d.e[+] ${something_to_add}</code></pre>

    <h3 class="card-title">grep</h3>
    <ul>
      <li><code>v</code> - find all except the match</li>
      <li><code>c</code> - get number of lines with match</li>
      <li><code>i</code> - ignore case</li>
      <li><code>r</code> - find matches recursively in files in directory</li>
    </ul>

<pre><code class="bash">grep &lt;options&gt; pattern &lt;files&gt;

# Check if a string exists in a file.
if greq -q ${string} ${file}; then
  # Do something.
fi
</code></pre>

    <h3 class="card-title">find</h3>

<pre><code class="bash">find &lt;pathnames&gt; &lt;conditions&gt;

# Find files who name contains "mail" in "/etc".
find /etc -name "*mail*"

# Find files who content contains "main" in "/".
find ./ -type f -exec grep -Hn "mail" {} \;

# Find files greater than 100M.
find / -type f -size +100M

# Find files modified in last two days.
find . –mtime -2

# List files greater than 100M.
find / -type f -name *.tar.gz -size +100M -exec ls -l {} \;

# Delete files greater than 100M.
find / -type f -name *.tar.gz -size +100M -exec rm -f {} \;

# Loop through results from "find".
find / type -f -name ${filename} 2> /dev/null | while read line; do
  # Do something with ${line}
done</code></pre>

    <h3 class="card-title">Uppercase and lowercase</h3>

<pre><code class="bash"># Convert to uppercase.
tr a-z A-Z < file.txt

# Convert to lowercase.
tr A-Z a-z < file.txt

# Convert a string to lowercase.
lowercase=$(echo "${string}" | tr '[:upper:]' '[:lower:]')

var="Test"

lowercase=${var,,}
echo "${lowercase}" # test

uppercase=${var^^}
echo "${uppercase}" # TEST</code></pre>

    <h3 class="card-title">Cut</h3>

<pre><code class="bash"># Display 1st field from colon delimited file.
cut -d: -f 1 file.txt

# Display 1st and 3rd field from colon delimited file.
cut -d: -f 1,3 file.txt

# Displays unix login names for all users in the system.
cut -d: -f1 /etc/passwd

# Displays total memory available on the system.
free | tr -s ' ' | sed '/^Mem/!d' | cut -d" " -f2 </code></pre>

    <h3 class="card-title">envsubst</h3>

<pre><code class="json">{
  "field1": "${value1}",
  "field2": "${value2}",
  "field3": "${value3}"
}</code></pre>

<pre><code class="bash"># "envsubst" updated above JSON.
data=$(value1="some_value1" value2="some_value2" value3="some_value3" envsubst '${value1}, ${value2}, ${value3}' < $file_name)</code>
</pre>

    <h3 class="card-title">Environment variable</h3>

<pre><code class="bash"># Add to an environment variable.
export ENV_VAR=$ENV_VAR:/path/to/add</code></pre>

<pre><code class="bash"># Remove from an environment variable.
directory_to_remove=/path/to/remove
ENV_VAR=:${ENV_VAR}:
ENV_VAR=${ENV_VAR//:$directory_to_remove:/:}
ENV_VAR=${ENV_VAR#:}; ENV_VAR=${ENV_VAR%:}</code></pre>

    <h3 class="card-title">Increment a snapshot version</h3>

<pre><code class="bash"># build.gradle
version=$(grep version\( build.gradle | cut -d- -f1 | cut -d\' -f2)
[[ -n $grep version\( build.gradle | grep SNAPSHOT) ]] && version=$(echo $version | awk -F\. '{print $1"."$2"."(#3-1)}')
echo $version</code></pre>

<pre><code class="bash"># maven-metadata.xml (in Nexus)
url=&lt;nexus_url&gt;/repository/&lt;repo_name&gt;/&lt;group_id&gt;/&lt;artifact_id&gt;/maven_metadata.xml
current_version=$(curl -k $url | grep -Po '(?&lt;=&lt;version&gt;)([0-9\.]+(-SNAPSHOT)?)' | sort --version-sort r | head -n 1)
incremented_version=$(echo $current_version | awk -F. -v OFS=. 'NF==1{pring ++$NF}; NF&gt;1{if(length($NF+1)&gt;length($NF))$(NF-1)++;$NF=sprintf("%0*d", length($NF), ($NF+1)%(10^length($NF))); print}')
echo $incremented_version</code></pre>

    <h3 class="card-title">Case</h3>

<pre><code class="bash">case "${variable}" in
  a)
    # Do something.
    ;;
  b)
    # Do something.
    ;;
  *)
    echo "Unexpected '${variable}'"
    ;;
esac</code></pre>

    <h3 class="card-title">Shellcheck</h3>

    <ul>
      <li>https://www.shellcheck.net</li>
    </ul>
  </div>

  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="linux-2">
  <div class="card-body">
    <h2 class="card-title">CD Command</h2>

    <h3 class="card-title">CDPATH</h3>

<pre><code class="bash">export CDPATH=/etc
cd security
/etc/security
# To make this permanent, add "export CDPATH=/etc" to "~/.bash_profile" (also do "source ~/.bash_profile")</code></pre>

    <h3 class="card-title">alias</h3>

<pre><code class="bash">alias ..5=../../../../../
cd one/two/three/four/five/six
cd ..5
pwd
one</code></pre>

    <h3 class="card-title">mkdircd</h3>

<pre><code class="bash">mkdircd /one/two/three
pwd
one/two/three</code></pre>

    <h3 class="card-title">dirs</h3>
    <ul>
      <li><code>cd</code> - toogle between last two directories.</li>
      <li><code>dirs</code> - display directory stack.</li>
      <li><code>pushd</code> - push directory into stack.</li>
      <li><code>popd</code> - pop directory from stack and cd to it.</li>
    </ul>

<pre><code class="bash"># Example: create tmp, do the work, and remove tmp.
mkdir tmp && pushd

# Do some work.
popd && rm -rf tmp</code></pre>

    <h3 class="card-title">shopt -s cdspell</h3>

<pre><code class="bash">shopt -s cdspell
cd /etc/mall
pwd
/etc/mail</code></pre>
  </div>
  <div class="card-footer text-muted">
      Reference: Linux 101 Hacks, Remesh Natarajan, www.thegeekstuff.com
  </div>
</div>

<div class="card mb-4" id="linux-3">
  <div class="card-body">
    <h2 class="card-title">Date</h2>

    <h3 class="card-title">System date and time</h3>

<pre><code class="bash">date -s "01/31/2009 22:19:53"</code></pre>

    <h3 class="card-title">Set hardware date and time based on system date and time</h3>

<pre><code class="bash">hwclock --systohc –utc</code></pre>

    <h3 class="card-title">Format date and time</h3>

<pre><code class="bash">date
date --date='1970-01-01 00:00:01 UTC +5 hours' +%s
date '+Current Date: %m/%d/%y%nCurrent Time:%H:%M:%S'
date +"%d/%m/%Y"
date +"%A,%B %d %Y"</code></pre>

    <h3 class="card-title">Past date and time</h3>

<pre><code class="bash">date --date="1 day ago"
date --date="1 year ago"
date --date="yesterday"</code></pre>

    <h3 class="card-title">Future date and time</h3>

<pre><code class="bash">date --date="1 day"
date --date="1 year"
date --date="tomorrow"</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Linux 101 Hacks, Remesh Natarajan, www.thegeekstuff.com
  </div>
</div>

<div class="card mb-4" id="linux-4">
  <div class="card-body">
    <h2 class="card-title">SSH and SCP</h2>
    <h3 class="card-title">Check ssh version</h3>

<pre><code class="bash">ssh -V</code></pre>

    <h3 class="card-title">Login to remote</h3>

<pre><code class="bash">ssh -l &lt;username&gt; &lt;ip&gt;</code></pre>

    <h3 class="card-title">Debug ssh client session</h3>

<pre><code class="bash">ssh -v l &lt;username&gt; &lt;ip&gt;</code></pre>

    <h3 class="card-title">Creating public and private key pair. First, have <strong>Git</strong> installed in your machine</h3>

<pre><code class="bash">ssh-keygen</code></pre>

    <img class="img-fluid" class="card-img-top" src="/img/linux/linux1.png" alt="Card image cap" style="max-width:500px">
    <ul>
      <li>You can choose to have passphrase as well. (which you need to remember when sshing into a remote machine)</li>
      <li>Make sure to give 600 to id_rsa and 644 to id_rsa.pub and known_hosts.</li>
    </ul>

    <h3 class="card-title">Refresh known_hosts</h3>

<pre><code class="bash">ssh-keyscan -H &lt;ip&gt; ~/.ssh/known_hosts</code></pre>

    <h3 class="card-title">Change SSH password</h3>

<pre><code class="bash">Login via SSH first. Type "passwd" and enter the existing and new passwords</code></pre>

    <h3 class="card-title">SCP</h3>

<pre><code class="bash"># Local to remote.
scp -r &lt;folder&gt; &lt;username&gt;@&lt;IP-or-hostname&gt;:&lt;directory&gt;

# Remote to local.
scp &lt;username&gt;@&lt;IP-or-hostname&gt;:&lt;file&gt; &lt;directory&gt;</code></pre>

    <h3 class="card-title">SSH tunnel via port-forwarding</h3>

<pre><code class="bash">ssh -i &lt;host-private-key&gt; -L &lt;host-port&gt;:&lt;vm-ip&gt;:&lt;vm-port&gt; &lt;vm-username&gt;@&lt;vm-ip&gt; -N</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="linux-5">
  <div class="card-body">
    <h2 class="card-title">PS</h2>

    <h3 class="card-title">Change color of prompt</h3>

<pre><code class="bash">export PS1="\e[0;34m\u@\h \w> \e[m " # blue color (foreground), username, host and current directory</code></pre>

<pre><code class="bash"># For permanent change, in ~/.bash_profile
STARTCOLOR='\e[0;34m';
ENDCOLOR="\e[0m"
export PS1="$STARTCOLOR\u@\h \w> $ENDCOLOR"</code></pre>

<pre><code class="bash">export PS1="\e[47m\u@\h \w> \e[m " # blue color (background), username, host and current directory</code></pre>

<pre><code class="bash"># For permanent change, in ~/.bash_profile
STARTFGCOLOR='\e[0;34m';
STARTBGCOLOR="\e[47m"
ENDCOLOR="\e[0m"
export PS1="$STARTFGCOLOR$STARTBGCOLOR\u@\h \w> $ENDCOLOR"</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Linux 101 Hacks, Remesh Natarajan, www.thegeekstuff.com
  </div>
</div>

<div class="card mb-4" id="linux-6">
  <div class="card-body">
    <h2 class="card-title">Archive</h2>

    <h3 class="card-title">zip {.zip file-name} {file-names}</h3>

<pre><code class="bash">zip var-log-files.zip /var/log/* # zip all files in /var/log/* into var-log-files.zip</code></pre>

    <h3 class="card-title">unzip var-log.zip</h3>

    <h3 class="card-title">Compression</h3>

<pre><code class="bash">zip var-log-files-default.zip /var/log/* # level 6 - default high compression
zip -0 var-log-files-0.zip /var/log/* # level 0 - no compression
zip -9 var-log-files-9.zip /var/log/* # level 9 - highest compression</code></pre>

    <h3 class="card-title">Password protect</h3>

<pre><code class="bash">zip -P mysecurepwd var-log-protected.zip /var/log/*</code></pre>

    <h3 class="card-title">tar</h3>
    <ul>
      <li><code>c</code> - create an archive</li>
      <li><code>v</code> - verbose mode</li>
      <li><code>f</code> - archive file name</li>
      <li><code>x</code> - extract files from tar archive</li>
      <li><code>z</code> - hen dealing with tar.gz compressed file</li>
      <li><code>j</code> - when dealing with tar.bz2 compressed file</li>
    </ul>

<pre><code class="bash">tar &lt;options&gt; &lt;tar-archive-name&gt; &lt;other-file-names&gt;
tar cvf /tmp/file.tar /home/rieh # create tar
tar xvf /tmp/file.tar # extract tar</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Linux 101 Hacks, Remesh Natarajan, www.thegeekstuff.com
  </div>
</div>

<div class="card mb-4" id="linux-7">
  <div class="card-body">
    <h2 class="card-title">Administration</h2>

    <h3 class="card-text">Disk</h3>
    <ul>
      <li><code>n</code> - new partition creation</li>
      <li><code>d</code> - delete existing partition</li>
      <li><code>p</code> - print partition table</li>
      <li><code>w</code> - write changes to the partition table</li>
      <li><code>q</code> - quit fdisk utility</li>
    </ul>

<pre><code class="bash">fdisk /dev/sda # invoke fdisk (first step to create /dev/sda1 primary partition)
mke2fs /dev/sda1 # format disk so it can be used
mount /dev/sda1 /home/database # mount partition to directory
tune2fs -l /dev/sda1 # view the filesystem</code></pre>

    <h3 class="card-text">User and group</h3>

<pre><code class="bash">useradd rieh # add a user
passwd rieh # change user password
groupadd developers # add a group
usermod -g developers jsmith # add user to group</code></pre>

    <h3 class="card-text">Owndership and permission</h3>

<pre><code class="bash">chmod -fR &lt;permission&gt; &lt;directory/file&gt; # change permission on file/directory
chown -fR &lt;user/group&gt;:&lt;user/group&gt; &lt;directory/file&gt; # change ownership of file/directory</code></pre>

    <h3 class="card-text">Access control</h3>

<pre><code class="bash">/etc/security/access.conf # Add user(s) or groups(s) to this file to grant access to the machine</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Linux 101 Hacks, Remesh Natarajan, www.thegeekstuff.com
  </div>
</div>

<div class="card mb-4" id="linux-8">
  <div class="card-body">
    <h2 class="card-title">System</h2>

    <ul>
      <li>Crtl+Z - SIGSTOP (cannot be intercepted)</li>
      <li>Crtl+C - SIGINT (can be intercepted)</li>
      <li>Latency - speed</li>
      <li>Throughput - volume</li>
    </ul>

    <h3 class="card-text">free</h3>
    <ul>
      <li><code>m</code> - displays values in MB</li>
      <li><code>t</code> - displays sum of physical and swap memory</li>
      <li><code>o</code> - hide buffers/cache line</li>
    </ul>

<pre><code class="bash">free &lt;options&gt;</code></pre>

    <h3 class="card-text">top</h3>
    <ul>
      <li><code>us</code> - cpu time spent in user mode</li>
      <li><code>sy</code> - cpu time spent in kernel mode</li>
      <li><code>ni</code> - cpu tmie spent in niced executing processes</li>
      <li><code>id</code> - cpu time spent idle</li>
      <li><code>wa</code> - cpu time spent waiting for I/O</li>
      <li><code>hi</code> - cpu time spent on hardware inputs</li>
      <li><code>si</code> - cpu time spent on software inputs</li>
      <li><code>VIRT</code> - virtual memory (budget)</li>
      <li><code>RES</code> - physical memory (money)</li>
    </ul>

<pre><code class="bash">top</code></pre>

    <h3 class="card-text">Memory</h3>

<pre><code class="bash">grep MemTotal /proc/meminfo</code></pre>

    <h3 class="card-text">ps &lt;options&gt;</h3>

<pre><code class="bash">ps aux | more # Display all processes running in system.
ps -ef | grep defunct # Find parent process of a defunct process.</code></pre>

    <h3 class="card-text">df &lt;options&gt; &lt;name&gt;</h3>

<pre><code class="bash">df –h # human readable format</code></pre>

    <h3 class="card-text">kill &lt;options&gt; &lt;pids|commands&gt;</h3>

    <h3 class="card-text">Disk usage</h3>

<pre><code class="bash">du -sh ~

# Find size of folders.
du --max-depth=1 &lt;directory&gt; | sort -n -r

# If there is a discrepancy from du to reality.
lsof | grep &lt;directory&gt; | grep deleted</code></pre>

    <h3 class="card-text">lsof</h3>

<pre><code class="bash">lsof | more # view all open files in system
lsof -i -P -n | grep LISTEN # find pid and kill them
kill -9 &lt;pid&gt;</code></pre>

    <h3 class="card-text">sar</h3>

<pre><code class="bash">sar –u # Display CPU statistics
sar –d # Display disk IO statistics</code></pre>

    <h3 class="card-text">stat</h3>

<pre><code class="bash">netstat -tulnp | grep 8443 # find processes running on port 8443
stat -c "%a &n" * # display stats of files</code></pre>

    <h3 class="card-text">Diff</h3>

<pre><code class="bash">diff -w file_old.txt file_new.txt</code></pre>

    <h3 class="card-text">Reboot the machine</h3>

<pre><code class="bash">sudo reboot</code></pre>
  </div>
  <div class="card-footer text-muted">
    Reference: Linux 101 Hacks, Remesh Natarajan, www.thegeekstuff.com
  </div>
</div>

<div class="card mb-4" id="linux-10">
  <div class="card-body">
    <h2 class="card-title">Color</h2>

<pre><code class="bash">printf "Foreground Regular\n"
printf "\033[31mI am Red\033[0m\n"
printf "\033[32mI am Green\033[0m\n"
printf "\033[33mI am Yellow\033[0m\n"
printf "\033[34mI am Blue\033[0m\n"
printf "\033[35mI am Magenta\033[0m\n"
printf "\033[36mI am Cyan\033[0m\n"
printf "\033[37mI am Light Gray\033[0m\n"

printf "Foreground Bright\n"
printf "\033[90mI am Dark Gray\033[0m\n"
printf "\033[91mI am Light Red\033[0m\n"
printf "\033[92mI am Light Green\033[0m\n"
printf "\033[93mI am Light Yellow\033[0m\n"
printf "\033[94mI am Light Blue\033[0m\n"
printf "\033[95mI am Light Magenta\033[0m\n"
printf "\033[96mI am Light Cyan\033[0m\n"

printf "Background Regular\n"
printf "\033[41mI am Red\033[0m\n"
printf "\033[42mI am Green\033[0m\n"
printf "\033[43mI am Yellow\033[0m\n"
printf "\033[44mI am Blue\033[0m\n"
printf "\033[45mI am Magenta\033[0m\n"
printf "\033[46mI am Cyan\033[0m\n"
printf "\033[47mI am Light Gray\033[0m\n"

printf "Background Bright\n"
printf "\033[100mI am Dark Gray\033[0m\n"
printf "\033[101mI am Light Red\033[0m\n"
printf "\033[102mI am Light Green\033[0m\n"
printf "\033[103mI am Light Yellow\033[0m\n"
printf "\033[104mI am Light Blue\033[0m\n"
printf "\033[105mI am Light Magenta\033[0m\n"
printf "\033[106mI am Light Cyan\033[0m\n"</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="linux-11">
  <div class="card-body">
    <h2 class="card-title">Python Integration</h2>
    <p class="card-text"></p>

    <h3 class="card-title">Virtual python environment</h3>
<pre><code class="bash"># create python3 virtual environment at .env directory.
virtualenv -p python3 .env

source .env/bin/activate

# Assuming python dependencies are under "requirements.txt"
pip3 install -r requirements.txt </code></pre>

    <p class="card-text"></p>
<pre><code class="bash"># Execute python.
python &lt;your_script.py&gt; &lt;options&gt; &lt;arguments&gt;</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="linux-12">
  <div class="card-body">
    <h2 class="card-title">Cron</h2>
    <p class="card-text"></p>

    <ul>
      <li>Minute (0 - 59)</li>
      <li>Hour (0 - 23)</li>
      <li>Day of the month (1 - 31)</li>
      <li>Month (1 - 12)</li>
      <li>Day of the week (0 - 6) # Sunday to Saturday</li>
    </ul>

<pre><code class="bash"># Find cron jobs for a root user.
sudo crontab -u root -l

# Find cron jobs for all users.
for use in $(cut -f1 -d: /etc/passwd); do sudo crontab -u $user -l; done</code></pre>

    <h3 class="card-title">Example</h3>
<pre><code class="bash">22 5 * * 6 # 5:22AM every Saturday
*/5 * * * * # Every 5 minutes
0 0 1 1 * # Yearly
0 0 1 * * # Monthly
0 0 * * 0 # Weekly
0 0 * * * # Daily
0 * * * * # Hourly</code></pre>

<pre><code class="bash">ls -la /etc/cron.hourly
ls -la /etc/cron.daily
ls -la /etc/cron.weekly
ls -la /etc/cron.monthly</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="linux-13">
  <div class="card-body">
    <h2 class="card-title">File</h2>

    <h3 class="card-title">Ownership and permission</h3>
    <ul>
      <li>owner / grouup / all users</li>
      <li>read(4) / write (2) / execute (1)</li>
    </ul>
<pre><code class="bash"># For example, "chmod 640" gives read and write permission to the owner, read permission to the group, no permission to all others
chmod 640 $file</code></pre>

    <h3 class="card-title">Softlink</h3>
<pre><code class="bash"># To have "link1 -> file1"
ln -s file1 link1
ls -l file1 link1</code></pre>

    <h3 class="card-title">Remove a file starting with dash.</h3>
<pre><code class="bash">rm ./-file</code></pre>

    <h3 class="card-title">Split and merge files.</h3>
<pre><code class="bash"># Split file.tar.gz by 1000000000 (this produces xaa, xab, xac, ...)
split -b 1000000000 file.tar.gz

# Merge splitted files.
cat x* > file.tar.gz</code></pre>

    <h3 class="card-title">Remove a file except 'file_to_remove'.</h3>
<pre><code class="bash">find . ! -name 'file_to_remove' -type f -exec rm -r {} +</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="linux-14">
  <div class="card-body">
    <h2 class="card-title">Process and Thread</h2>

    <h3 class="card-title">Program</h3>
    <ul>
      <li>An executable file.</li>
    </ul>

    <h3 class="card-title">Process</h3>
    <ul>
      <li>Running instance of a program.</li>
      <li>Process is an isolated execution entity, which does not share data.</li>
      <li>Creating process requires a separate system call.</li>
      <li>It has its own heap memory.</li>
    </ul>

    <h3 class="card-title">Thread</h3>
    <ul>
      <li>Thread is an execution unit, which is a part of process.</li>
      <li>It is a unit of execution in concurrent programming.</li>
      <li>It can be managed by a scheduler.</li>
    </ul>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>
<!-- Linux END -->

</div> <!-- /.col-md-12 -->
</div> <!-- /.row -->
</div> <!-- /.container -->

<include src="/footer.html"></include>

</body>

</html>