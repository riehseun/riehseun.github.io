<!DOCTYPE html>

<html lang="en">

<head>

<!-- Metadata -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="Seungmoon Rieh">
<meta name="keywords" content="">

<!-- Title and image -->
<title>Seungmoon Rieh</title>
<link href="img/seungmoonrieh.jpg" rel="icon">

<!-- CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/monokai-sublime.css" rel="stylesheet">
<link href="css/site.css" rel="stylesheet">

<!-- JavaScript -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/highlight.pack.js"></script>
<script type="text/javascript" src="js/include_html.js"></script>
<script type="text/javascript" src="js/site.js"></script>

</head>

<body>

<include src="header.html"></include>

<div class="container">
<div class="row">
<div class="col-md-12">
<h1 class="my-4">Infrastructure DevOps</h1>

<!-- Git BEGIN -->
<div class="card mb-4" id="git">
  <div class="card-body">
    <h2 class="card-title">GIT</h2>
    <ul class="list-unstyled mb-0">
      <li><a href="#git-1">Branching strategy</a></li>
      <li><a href="#git-2">Git concets</a></li>
      <li><a href="#git-3">Git commands</a></li>
      <li><a href="#git-4">Squashing commits</a></li>
    </ul>
  </div>
</div>

<div class="card mb-4" id="git-1">
  <div class="card-body">
    <h2 class="card-title">Branching strategy</h2>
    <p class="card-text"></p>
    <h3 class="card-title">Git flow</h3>
    <p class="card-text">It is easier to keep many versions of production code from the release branches.</p>
    <img class="img-fluid" class="card-img-top" src="img/git/git-1-a.png" alt="Card image cap">
    <ul class="list-unstyled mb-0">
      <li><strong>master</strong>: represent the production.</li>
      <li><strong>release</strong>: branch to perform release. Must be merged into both develop and master branches.</li>
      <li><strong>develop</strong>: branch for active development. All features branches must be cut from and merged to this branch.</li>
      <li><strong>feature</strong>: branch for each developer working on a feature. Developers should regularly pull from develop branch to keep feature branches up to date.</li>
      <li><strong>hotfix</strong>: branch to quickly apply changes to master branch without going through the full flow. Must be merged into both master and develop branch.</li>
    </ul>
    <br>

    <h3 class="card-title">Github flow</h3>
    <p class="card-text">Simpler but aimed at maintaining a single version of production code.</p>
    <ul class="list-unstyled mb-0">
      <li>There are only <strong>master</strong> and <strong>develop</strong> branch.</li>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: <a href="https://www.bmc.com/blogs/devops-branching-strategies">DevOps Branching Strategies Explained</a>
  </div>
</div>

<div class="card mb-4" id="git-2">
  <div class="card-body">
    <h2 class="card-title">Git concepts</h2>
    <p class="card-text"></p>
<pre><code class="bash">git add # Move files from "untracked/modified" state to "staged" state.
git commit # Move files from "staged" state to "committed" state.</code></pre>

<pre><code class="bash">git fetch # Gather commits from remote that don't exist in local.
git merge # Integrate commits to your branch.
git pull # git fetch + git merge</code></pre>

<pre><code class="bash">branch # A version of code.
git cherry-pick # Get a commit from one branch and integrate to another branch.
HEAD # Last commit of current branch.</code></pre>

    <h3 class="card-title">Fork vs Clone</h3>
    <ul>
      <li>Fork: server side copy of repository.</li>
      <li>Clone: local copy of repository in a server including history and branches.</li>
    </ul>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="git-3">
  <div class="card-body">
    <h2 class="card-title">Git commands</h2>
    <p class="card-text"></p>
    <h3 class="card-title">Commonly used</h3>
<pre><code class="bash"># Make the local repository aware of the remote.
git remote add origin &lt;remote_url&gt;

# For example, to fix corrupt git repository.
rm -rf .git
git init
git remote add origin &lt;clone_url&gt;
git fetch
git reset origin/master</code></pre>

<pre><code class="bash"># Copy a repo to another repo.
git clone --bare --quiet &lt;git_clone_url_to_copy_from&gt;
git push --mirror --quiet &lt;git_clone_url_to_copy_into&gt;</code></pre>

<pre><code class="bash">git config --list # Show the current git config.
git config --global user.name &lt;name&gt; # Add name.
git config --global user.email &lt;email&gt; # Add email.</code></pre>

<pre><code class="bash">git status # Show files that have added, modified, and deleted.
git add -A # Move files to "staged".
git commit -am &lt;message&gt; # Move files to "commited".
git push origin &lt;branch&gt; # Apply your changes to a particular branch on remote repository.</code></pre>

<pre><code class="bash">git pull origin &lt;branch&gt; # Pull code from a particular branch on remote repository into your local workspace.
git checkout -b &lt;branch&gt; # Create a new branch whose code base will be your local workspace.
git checkout &lt;branch&gt; # Check out code base from a particular branch.</code></pre>

<pre><code class="bash">git branch -d &lt;branch&gt; # Delete a particular branch from your local.
git push origin -d &lt;branch&gt; # Delete a particular branch from remote repository.
git tag -d &lt;tag&gt; # Delete a tag from your local.
git push origin -d &lt;tag&gt; # Delete a tag from remote repository.</code></pre>

<pre><code class="bash">git fetch # Update tracking of remote branches.
git fetch --prune # Remove local branches that do not exist in remote.
git branch -a # Display local and remote branches.
git clean -f # Remove all untracked files.</code></pre>

<pre><code class="bash"># Compare two branches.
git diff &lt;branch_1&gt; &lt;branch_2&gt;
# Compare a specific file between two branches.
git diff &lt;branch_1&gt; &lt;branch_2&gt; -- &lt;file&gt;</code></pre>

<h3 class="card-title">Revert</h3>

<pre><code class="bash">git reflog # Show lost commit.
git reset --hard &lt;commit_hash&gt; # Revert to a deleted commit. (Assuming &lt;commit_hash&gt; was retrieved from the output of "git reflog")
git reset --hard &lt;commit_hash&gt; && git push -f origin &lt;branch&gt; # Revert to previous commit in the remote.
git checkout HEAD &lt;file&gt; # Discard changes in a particualr file. / Restore a deleted file.
git fetch --all && git reset --hard origin/&lt;branch_name&gt; # Force overwrite local with remote.
git checkout &lt;target_branch&gt; && git cherry-pick &lt;commit_hash&gt; && git checkout &lt;source_branch&gt; && git reset --hard HEAD~1 # &lt;commit_hash&gt; should come from &lt;source_branch&gt;. Last two steps are to clean up the &lt;source_branch&gt;</code></pre>
<!-- probably should use "git branch | grep -v "master" | xargs git branch -D "-->

<pre><code class="bash"># Revert a merged PR.
# Checkout a branch from master. Ex. git checkout -b revert
git revert -m 1 &lt;commit_hash_of_PR_to_revert&gt;  # This reverts a particular commit
git revert -m 1 &lt;commit_hash&gt;..HEAD  # This reverts everything up to but not including commit_hash
git push origin revert
# Then, raise a PR from revert to master</code></pre>

<pre><code class="bash"># Revert a single file.
git checkout &lt;commit_hash_of_file_to_revert_to&gt; -- &lt;file_including_path&gt;
git commit -am &lt;commit_message&gt;
git push origin &lt;branch_name&gt;</code></pre>

<pre><code class="bash"># Moving uncommited changes to a new branch. (For example, when accidently made changes to the master branch)
git stash
git checkout -b &lt;branch_name&gt;
git stash apply</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>

<div class="card mb-4" id="git-4">
  <div class="card-body">
    <h2 class="card-title">Squashing commits</h2>
    <p class="card-text">When there are too many commits, it may be hard for other people to review your pull requests. Squashing commits comes handy</p>
<pre><code class="bash"># Search your commit history and pick the one you want to squash commits from.
git log --oneline

# This opens nano editor.
# Use reword/pick/squash to specify what you want to do for each commit.
# Usually, "r" the first commit at the top and "s" the rest of commits. (For example, to avoid "Cannot 'squash' without a previous commit" error)
# Ctrl-O &amp; Ctrl-T will write your changes.
git rebase -p -i &lt;commit_hash&gt;

# Observe that commits have been squashed.
git log --oneline

# This opens nano editor. Enter new commit message. Ctrl-O &amp; Ctrl-T will write your changes.
git commit --amend

# Finally push the changes to your branch.
git push -f origin &lt;branch&gt;</code></pre>
  </div>
  <div class="card-footer text-muted">

  </div>
</div>
<!-- Git END -->

</div> <!-- /.col-md-12 -->
</div> <!-- /.row -->
</div> <!-- /.container -->

<include src="footer.html"></include>

</body>

</html>