<!DOCTYPE html>

<html lang="en">

<head>

<!-- Metadata -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="Seungmoon Rieh">
<meta name="keywords" content="">

<!-- Title and image -->
<title>Seungmoon Rieh</title>
<link href="/img/seungmoonrieh.jpg" rel="icon">

<!-- CSS -->
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/monokai-sublime.css" rel="stylesheet">
<link href="/css/site.css" rel="stylesheet">

<!-- JavaScript -->
<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/bootstrap.bundle.min.js" type="text/javascript"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script src="/js/include_html.js" type="text/javascript"></script>
<script src="/js/mathjax/tex-chtml.js" type="text/javascript"></script>
<script src="/js/site.js" type="text/javascript"></script>

</head>

<body>

<include src="/header.html"></include>

<div class="container">
<div class="row">
<div class="col-md-12">
<h1 class="my-4">Software Engineering</h1>

<!-- System design BEGIN -->
<div class="card mb-4" id="system-design">
  <div class="card-body">
    <h2 class="card-title">System Design</h2>
    <!-- <ul class="list-unstyled mb-0"> -->
    <ul>
      <li>Structure</li>
      <ul>
        <li><a href="#system-design-">Requirement and Estimation</a> - 5 minutes</li>
        <li><a href="#system-design-">Data Model</a> - 2 minutes</li>
        <li><a href="#system-design-">API</a> - 5 minutes</li>
        <li><a href="#system-design-">High-level Design</a> - 10 minutes</li>
        <li><a href="#system-design-">Detailed Design</a> - 10 minutes</li>
      </ul>
      <li>Product design  <strong>(in-scope)</strong></li>
      <!-- <ul>
        <li><a href="/system-design/2.3-instagram.html">Design Instagram</a></li>
      </ul> -->
      <li>Infrastructure design (out-of-scope)</li>
      <ul>
        <li>Rate limiter</li>
        <li>Message broker</li>
        <li>Key-value store</li>
      </ul>
      <li>Object-oriented design (out-of-scope)</li>
      <ul>
        <li>Parking lot reservation system</li>
        <li>Vending machine</li>
        <li>Elevator control system</li>
      </ul>
      <li>Front-end design (out-of-scope)</li>
      <ul>
        <li>Design front-end of spreadsheet app</li>
        <li>Design front-end of video editor app</li>
      </ul>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: System Design Interview, Alex Xu | <a href="https://www.hellointerview.com">hello interview</a>
  </div>
</div>

<div class="card mb-4" id="system-design-">
  <div class="card-body">
    <h2 class="card-title">Requirement and Estimation</h2>
    <ul>
      <li>Functional - prioritize top 3 requirements</li>
      <li>Non-functional - each requirement should have target numbers</li>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: System Design Interview, Alex Xu | <a href="https://www.educative.io/path/deep-dive-into-system-design-interview">Deep Dive into System Design Interview</a>
  </div>
</div>

<div class="card mb-4" id="system-design-">
  <div class="card-body">
    <h2 class="card-title">Data Model</h2>
    <ul>
      <li>Relational</li>
      <ul>
        <li>Need strong consistency</li>
        <li>Normalization</li>
        <ul>
          <li>Split data across tables to avoid duplicate</li>
          <li>Joins are needed to get complete data</li>
          <li>Normalization by default and only de-normalize for specific hot path</li>
        </ul>
        <li>De-normalization</li>
        <ul>
          <li>Avoid joins to make read faster</li>
          <li>Updates are expensive</li>
        </ul>
      </ul>
      <li>NoSQL</li>
      <ul>
        <li>Schema changes often</li>
        <li>Need to know common queries upfront and design accordingly</li>
      </ul>
      <li>Index</li>
      <ul>
        <li>Sort data to make read faster</li>
        <li>DB index</li>
        <ul>
          <li>B-tree - exact lookups and ranged queries</li>
          <li>Hash index - specialized for exact lookups</li>
        </ul>
        <li>External system</li>
        <ul>
          <li>Elasticsearch - full-text search</li>
        </ul>
      </ul>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: <a href="https://www.hellointerview.com">hello interview</a>
  </div>
</div>

<div class="card mb-4" id="system-design-">
  <div class="card-body">
    <h2 class="card-title">API</h2>
    <ul>
      <li>Communication protocol</li>
      <ul>
        <li>REST</li>
        <ul>
          <li>Ex. <code>/users/{id}</code> - get a user</li>
          <li>Ex. <code>/events/{id}/bookings</code> - create a booking</li>
        </ul>
        <li>GraphQL</li>
        <ul>
          <li>Request exactly the fields clients need in a single query</li>
          <li>Address under-fetching/over-fetching issue</li>
          <li>Add complexitiy to backend like query parsing, schema validation, N+1 query problem</li>
        </ul>
        <li>gRPC</li>
        <ul>
          <li>Common pattern is REST for external APIs and gRPC for internal microservice communication</li>
        </ul>
      </ul>
      <li>Authentication</li>
      <ul>
        <li>JWT tokens for user sessions</li>
        <li>API keys for service-to-service calls</li>
      </ul>
      <li>Rate limiting</li>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: <a href="https://www.hellointerview.com">hello interview</a>
  </div>
</div>

<div class="card mb-4" id="system-design-">
  <div class="card-body">
    <h2 class="card-title">High-level Design</h2>
  </div>
  <div class="card-footer text-muted">
    Reference: System Design Interview, Alex Xu
  </div>
</div>

<div class="card mb-4" id="system-design-">
  <div class="card-body">
    <h2 class="card-title">Detailed Design</h2>
    <ul>
      <li>Network</li>
      <ul>
        <li>Communication protocol</li>
        <ul>
          <li>HTTP (REST)</li>
          <ul>
            <li>Used 90% of time</li>
            <li>Used for external API</li>
          </ul>
          <li>Server-Sent Events</li>
          <ul>
            <li>Bidirectional communication</li>
            <li>Stateful connection (can't simply put it in load-balancer)</li>
            <li>Ex. chat</li>
          </ul>
          <li>WebSockets</li>
          <ul>
            <li>Check that HTTP with long-polling or SSE work first before considering WebSockets</li>
            <li>Server-to-client push only</li>
            <li>Stateful connection (can't simply put it in load-balancer)</li>
            <li>Typically need Layer 4 balancing for maintaining persistent TCP connection</li>
            <li>Ex. notification</li>
          </ul>
          <li>gRPC</li>
          <ul>
            <li>Uses binary serialization and HTTP/2 (Faster than JSON used by HTTP)</li>
            <li>Browser support is limited</li>
            <li>Used for internal service-to-service communication</li>
          </ul>
        </ul>
        <li>Load balancer</li>
        <ul>
          <li>Layer 7</li>
          <ul>
            <li>Operate at application level</li>
            <li>Route based on HTTP request content</li>
          </ul>
          <li>Layer 4</li>
          <ul>
            <li>Operate at TCP level</li>
            <li>Distribute connections without looking at content</li>
          </ul>
        </ul>
      </ul>
      <li>Caching</li>
      <ul>
        <li>Only needed when read-heavy and data does not change frequently</li>
        <li>Use cash-aside with Redis 90% of time</li>
        <ul>
          <li>If data in cache, return it</li>
          <li>Else, query DB and put it in cache with TTL. Then, return it</li>
        </ul>
        <li>Invalidate cache</li>
        <ul>
          <li>Option 1. update cache immediate after DB is updated by write</li>
          <li>Option 2. short TTL</li>
        </ul>
        <li>Cache failure</li>
        <ul>
          <li>Option 1. built in-process cache as fallback</li>
        </ul>
        <li>CDN</li>
        <ul>
          <li>JS files, images, videos are served from edge location close to uers</li>
        </ul>
      </ul>
      <li>Sharding</li>
      <ul>
        <li>Only when a single database is not sufficient</li>
        <ul>
          <li>Single DB with read replica is enough for 10K writes per second and 100GB of data</li>
        </ul>
        <li>Shard key is most important</li>
        <li>Consistent hashing</li>
        <ul>
          <li>Memcached and Redis Cluster uses it to distribute keys across cache nodes</li>
          <li>Cassandra and DynamoDB use it for sharding</li>
          <li>CDNs use it to route requests to edge servers</li>
        </ul>
      </ul>
      <li>CAP</li>
      <ul>
        <li>Choose availability with eventual consistency by default</li>
        <li>Choose consistency for Banking, Booking system</li>
      </ul>
    </ul>
  </div>
  <div class="card-footer text-muted">
    Reference: System Design Interview, Alex Xu | <a href="https://www.hellointerview.com">hello interview</a>
  </div>
</div>
<!-- System design END -->

</div> <!-- /.col-md-12 -->
</div> <!-- /.row -->
</div> <!-- /.container -->

<include src="/footer.html"></include>

</body>

</html>